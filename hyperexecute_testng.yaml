---
version: 0.2
globalTimeout: 300
testSuiteTimeout: 300
testSuiteStep: 300

# Platform configuration
runson: win

# Auto-split configuration for parallel execution
autosplit: true
retryOnFailure: true
maxRetries: 3
concurrency: 4

# Tunnel configuration for internal applications
tunnel: true

# Environment variables
env:
  LT_USERNAME: ${LT_USERNAME}
  LT_ACCESS_KEY: ${LT_ACCESS_KEY}
  CACHE_DIR: m2_cache_dir
  TEST_ENV: hyperexecute

# Cache configuration for faster builds
cacheKey: '{{ checksum "pom.xml" }}'
cacheDirectories:
  - .m2
  - target

# Pre-execution steps
pre:
  - echo "Setting up test environment..."
  - mvn -Dmaven.repo.local=./.m2 dependency:resolve
  - mvn clean compile

# Post-execution steps
post:
  - echo "Test execution completed"
  - ls -la target/surefire-reports/
  - echo "Generating test reports..."

# Artifact collection
mergeArtifacts: true
uploadArtefacts:
  - name: TestReports
    path:
      - target/surefire-reports/html/**
      - target/surefire-reports/xml/**
  - name: Screenshots
    path:
      - screenshots/**
  - name: Logs
    path:
      - logs/**

# Reporting configuration
report: true
partialReports:
  location: target/surefire-reports/html
  type: html
  frameworkName: testng

# Framework configuration
framework:
  name: maven/testng
  defaultReports: false
  flags:
    - "-Dsuite=parallel.xml"
    - "-Dmaven.repo.local=./.m2"

# Job labeling for identification
jobLabel: [testng-selenium, hyperexecute, parallel-execution]

# Notification settings
notifications:
  - type: email
    recipients: ["your-email@example.com"]
    onSuccess: true
    onFailure: true
